<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ .Article.Title }}|{{ .Title }}</title>
</head>

<body>

    <a href="/">
        <h1>{{ .Title }}</h1>
    </a>

    <h2>{{ .Article.Title }}</h2>

    <p>{{ .Article.Content }}</p>

    <button type="submit" onclick="deleteArticle.init('{{ .Article.ID }}')">この投稿を削除する</button>

    <script>

        const deleteArticle = {

            init: function(id) {
                console.log(id);
                this.alartDel();
                this.delRequest(id);
                this.redirectTop();
            },

            alartDel: function() {
                if (!window.confirm('本当に削除しますか')){
                    return;
                }
            },

            delRequest: function(id) {
                console.log(id)
                fetch(`/articles?id=${id}`, {method: 'DELETE'});
            },

            redirectTop: function() {
                window.location.href = '/';
            },



        }
    </script>
</body>

</html>